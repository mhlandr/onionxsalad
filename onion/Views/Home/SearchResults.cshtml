@using MongoDB.Bson
@model List<BsonDocument>

<form asp-action="Search" method="post">
    <div>
        <input type="text" name="searchTerm" placeholder="Enter search term" required />
        <button type="submit">Search</button>
    </div>
</form>

<h2>Search Results</h2>
<ul>
    @foreach (var result in Model)
    {
        <li>
            <strong>@result["site_name"]</strong> - @result["category"]
            <br />
            <a href="@result["onion_url"]" target="_blank">@result["onion_url"]</a>
            <button type="button" onclick="copyToClipboard('@result["onion_url"]')">Copy URL</button>
            <br /><br />
        </li>
    }
</ul>

<script>
    function copyToClipboard(url) {
        // Create a temporary input element to store the URL
        var tempInput = document.createElement("input");
        tempInput.value = url;
        document.body.appendChild(tempInput);

        // Select the text in the input element
        tempInput.select();
        tempInput.setSelectionRange(0, 99999); // For mobile devices

        // Copy the selected text to the clipboard
        document.execCommand("copy");

        // Remove the temporary input element
        document.body.removeChild(tempInput);

    }
</script>